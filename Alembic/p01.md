# **Lesson 1: Introduction to Alembic**

---

### 🌱 What is Alembic?

Alembic is a **Python package** that helps us **manage changes in a database structure** (called *migrations*) without losing the existing data.
It works with **SQLAlchemy**, which is the most common database toolkit used in FastAPI projects.

Think of Alembic as a **version control system for your database** — just like Git tracks changes in your code, Alembic tracks changes in your database tables.

---

### ⚙️ Why do we need database migrations?

When building an application, your **database tables** may need updates over time.
For example:

* You add a new column to the `users` table.
* You rename or delete an old table.
* You change a column’s type (e.g., from `Integer` to `String`).

If you manually change the database each time, it becomes messy and risky.
Alembic helps automate this process safely — by **creating migration scripts** that record exactly what changed and when.

---

### 🔗 How Alembic works with SQLAlchemy and FastAPI

* **SQLAlchemy** defines your tables and models in Python.
* **Alembic** reads those models and generates migration files that keep the database in sync with your code.
* **FastAPI** uses SQLAlchemy models to read/write data, so having Alembic ensures both the app and the database stay consistent.

Example flow:

1. You change your SQLAlchemy model.
2. Alembic detects the change.
3. Alembic generates a migration file.
4. You apply (upgrade) the migration to the real database.

---

### 🧩 Overview of schema versioning

Every time Alembic creates a migration, it gives it a **unique version number**.
These versions are stored in a special Alembic table in your database.

So, at any time, you can:

* **Upgrade** to a newer version (apply new changes), or
* **Downgrade** to an older version (undo changes).

This version control ensures your database always matches your application’s expected structure.

---

✅ **In short:**
Alembic helps you safely evolve your database as your FastAPI project grows — no manual SQL changes, no lost data, and everything versioned automatically.

