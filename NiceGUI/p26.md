# **Lesson 26 ‚Äî Making a Doctor‚Äôs Dashboard (Patients + Recent Visits)**

## ‚≠ê What you will learn in this lesson

In this lesson, you will make a **simple doctor‚Äôs dashboard** using NiceGUI.

On one web page, you will show:

* A list of **patients**
* A list of **recent visits** (who came, when, and why)

This is like giving the doctor a quick **summary screen**:

> ‚ÄúWho are my patients, and who visited recently?‚Äù

We will **not** use a real database yet.
We‚Äôll use **simple in-code data** (lists and dictionaries) to keep things easy.

---

## üß† Real-life picture

Imagine a busy clinic.

A doctor opens a dashboard and sees:

* A table of all patients (ID, name, age, gender)
* Below that, a table of recent visits, for example:

  * 2025-11-10 ‚Äì Rohan ‚Äì Fever
  * 2025-11-11 ‚Äì Anita ‚Äì Blood pressure check

This helps the doctor remember:

* Who came recently
* What they came for

We‚Äôll build a **small version** of that dashboard.

---

## ‚úÖ Step 1: Install NiceGUI (if not already)

In your terminal or command prompt, type:

```bash
pip install nicegui
```

---

## ‚úÖ Step 2: Write the dashboard code

Create a new file, for example: **lesson26_doctor_dashboard.py**

Put this code inside:

```python
from nicegui import ui

# Sample list of patients
patients = [
    {"id": 1, "name": "Rohan Das", "age": 32, "gender": "M"},
    {"id": 2, "name": "Anita Roy", "age": 45, "gender": "F"},
    {"id": 3, "name": "Sanjay Gupta", "age": 60, "gender": "M"},
]

# Sample list of visits
visits = [
    {"patient_id": 1, "date": "2025-11-10", "reason": "Fever and headache"},
    {"patient_id": 2, "date": "2025-11-11", "reason": "Blood pressure check"},
    {"patient_id": 3, "date": "2025-11-12", "reason": "Diabetes follow-up"},
    {"patient_id": 1, "date": "2025-11-13", "reason": "Cough and cold"},
]

def get_recent_visits(limit=5):
    # Sort visits by date (latest first)
    sorted_visits = sorted(visits, key=lambda v: v['date'], reverse=True)
    return sorted_visits[:limit]

def make_visit_rows():
    recent = get_recent_visits()
    rows = []
    for v in recent:
        # find matching patient
        patient = next((p for p in patients if p["id"] == v["patient_id"]), None)
        patient_name = patient["name"] if patient else "Unknown"
        rows.append({
            "date": v["date"],
            "patient": patient_name,
            "reason": v["reason"],
        })
    return rows

with ui.page("/"):
    ui.label("Doctor's Dashboard").classes("text-2xl")

    # Patients table
    ui.label("Patients").classes("text-lg mt-4")
    ui.table(
        columns=[
            {"name": "id", "label": "ID", "field": "id"},
            {"name": "name", "label": "Name", "field": "name"},
            {"name": "age", "label": "Age", "field": "age"},
            {"name": "gender", "label": "Gender", "field": "gender"},
        ],
        rows=patients,
    )

    ui.separator()

    # Recent visits table
    ui.label("Recent Visits").classes("text-lg mt-4")
    ui.table(
        columns=[
            {"name": "date", "label": "Date", "field": "date"},
            {"name": "patient", "label": "Patient", "field": "patient"},
            {"name": "reason", "label": "Reason", "field": "reason"},
        ],
        rows=make_visit_rows(),
    )

ui.run()
```

---

## ‚ú® Explanation in simple words

Let‚Äôs go through it slowly.

### 1Ô∏è‚É£ Import NiceGUI

```python
from nicegui import ui
```

* `ui` is what we use to build the web page
* It gives us labels, tables, buttons, etc.

---

### 2Ô∏è‚É£ Sample patient data

```python
patients = [
    {"id": 1, "name": "Rohan Das", "age": 32, "gender": "M"},
    {"id": 2, "name": "Anita Roy", "age": 45, "gender": "F"},
    {"id": 3, "name": "Sanjay Gupta", "age": 60, "gender": "M"},
]
```

* This is just a list of dictionaries
* Each dictionary represents **one patient**
* In a real app, this data might come from a database

---

### 3Ô∏è‚É£ Sample visit data

```python
visits = [
    {"patient_id": 1, "date": "2025-11-10", "reason": "Fever and headache"},
    {"patient_id": 2, "date": "2025-11-11", "reason": "Blood pressure check"},
    {"patient_id": 3, "date": "2025-11-12", "reason": "Diabetes follow-up"},
    {"patient_id": 1, "date": "2025-11-13", "reason": "Cough and cold"},
]
```

* Each visit links back to a patient using `patient_id`
* Example: `patient_id: 1` means **Rohan**

---

### 4Ô∏è‚É£ Function to get *recent* visits

```python
def get_recent_visits(limit=5):
    sorted_visits = sorted(visits, key=lambda v: v['date'], reverse=True)
    return sorted_visits[:limit]
```

* Sorts all visits so the **latest date comes first**
* Returns only the first few (max `limit`)

Right now `limit=5`, so we get up to 5 recent visits.

---

### 5Ô∏è‚É£ Prepare rows for the visits table

```python
def make_visit_rows():
    recent = get_recent_visits()
    rows = []
    for v in recent:
        patient = next((p for p in patients if p["id"] == v["patient_id"]), None)
        patient_name = patient["name"] if patient else "Unknown"
        rows.append({
            "date": v["date"],
            "patient": patient_name,
            "reason": v["reason"],
        })
    return rows
```

What this does:

* Looks at each recent visit
* Finds the **matching patient** by `patient_id`
* Builds a new row that has:

  * visit date
  * patient name
  * reason

This is what we show in the ‚ÄúRecent Visits‚Äù table.

---

### 6Ô∏è‚É£ Building the NiceGUI page

```python
with ui.page("/"):
    ui.label("Doctor's Dashboard").classes("text-2xl")
```

* This creates a web page at `/` (home page)
* We add a big title at the top

---

### 7Ô∏è‚É£ Patients table

```python
ui.label("Patients").classes("text-lg mt-4")
ui.table(
    columns=[
        {"name": "id", "label": "ID", "field": "id"},
        {"name": "name", "label": "Name", "field": "name"},
        {"name": "age", "label": "Age", "field": "age"},
        {"name": "gender", "label": "Gender", "field": "gender"},
    ],
    rows=patients,
)
```

* Shows all patients in a neat table
* Each column has:

  * `label` ‚Üí what we show on screen
  * `field` ‚Üí which key in the data it uses

---

### 8Ô∏è‚É£ Separator line

```python
ui.separator()
```

* Just a horizontal line to visually separate sections

---

### 9Ô∏è‚É£ Recent visits table

```python
ui.label("Recent Visits").classes("text-lg mt-4")
ui.table(
    columns=[
        {"name": "date", "label": "Date", "field": "date"},
        {"name": "patient", "label": "Patient", "field": "patient"},
        {"name": "reason", "label": "Reason", "field": "reason"},
    ],
    rows=make_visit_rows(),
)
```

* Shows recent consultations
* Uses `make_visit_rows()` so we can show **patient names**, not just IDs

---

### üîü Run the app

```python
ui.run()
```

* Starts the NiceGUI server
* Makes the app available in your browser

---

## üöÄ How to run and test

1. Save the file as:
   `lesson26_doctor_dashboard.py`

2. Open terminal / command prompt in the same folder

3. Run:

   ```bash
   python lesson26_doctor_dashboard.py
   ```

4. Open your browser and go to:

   ```
   http://localhost:8080
   ```

You should see:

* A **Patients** table at the top
* A **Recent Visits** table below

You have built a basic **doctor‚Äôs dashboard** üéâ

---

## üí° Tips & Best Practices

### ‚úî Tip 1 ‚Äî Later, connect to a database

Right now, data is inside the Python file.
In a real system, you would store patients and visits in:

* SQLite
* MySQL
* PostgreSQL

Then you would **query** and send the results to the tables.

---

### ‚úî Tip 2 ‚Äî Add filters in future

You can later add:

* A dropdown to select a patient and see only **that patient‚Äôs** visits
* A date filter like ‚Äúshow visits from last 7 days‚Äù

These small improvements make the dashboard much more useful.

---
