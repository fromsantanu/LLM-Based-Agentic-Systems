# **Lesson 14: Making the Chatbot Mobile-Friendly**

In this lesson, you will learn how to:

1. Make your chatbot layout adjust automatically to smaller screens
2. Use responsive widths
3. Add flexible containers
4. Adjust padding, font size, and spacing for mobile
5. Make input box and button easy to tap
6. Allow the chat window to grow/scroll smoothly

The goal is simple:
**Your chatbot should feel like a clean WhatsApp-style chat on mobile.**

---

## üß† Real-life picture

Think of how WhatsApp changes shape on different devices.

* On a large monitor ‚Üí messages appear in a wide box
* On a phone ‚Üí everything becomes narrow, stacked, and touch-friendly

We want the same behavior for your medical chatbot.

---

# ‚≠ê Strategy for Mobile-Friendly Design

We will use 3 simple rules:

### **Rule 1 ‚Äî Use percentages (like 100%) instead of fixed widths**

Phones are narrow.
So instead of:

```
w-1/2
```

we use:

```
w-full max-w-lg
```

This means:

* take full width of phone
* but on big screens, do not grow beyond ‚Äúmax-w-lg‚Äù

---

### **Rule 2 ‚Äî Use NiceGUI‚Äôs responsive layout (`.classes()`)**

With classes like:

* `w-full` ‚Üí takes all available width
* `max-w-lg` ‚Üí limits maximum size
* `mx-auto` ‚Üí centers on big screens
* `p-2` ‚Üí small padding
* `p-4` ‚Üí larger padding on wide screens

---

### **Rule 3 ‚Äî Keep the chat area flexible**

Use:

```
h-80 overflow-y-auto
```

or even:

```
h-[70vh]
```

This lets the chat take 80% or 70% of the screen height.

---

# ‚≠ê PART A ‚Äî Mobile-Friendly NiceGUI Chat UI

We improve lesson 12‚Äôs UI to become responsive.

---

## üíª Code: Mobile-Friendly Diagnostic UI

Save as: **diagnostic_ui_mobile.py**

```python
from nicegui import ui
import requests
import asyncio

BACKEND_URL = "http://localhost:8000/diagnose"

ui.session_state.setdefault("chat_history", [])

async def send_message():
    text = input_box.value
    if not text.strip():
        return

    ui.session_state.chat_history.append({"role": "doctor", "content": text})
    refresh_chat()
    input_box.value = ""

    typing = ui.label("AI is thinking...").classes("text-gray-500 italic text-sm")
    await asyncio.sleep(0.1)

    try:
        response = requests.post(
            BACKEND_URL,
            json={"history": ui.session_state.chat_history},
            timeout=20,
        )
        reply = response.json().get("reply", "")
    except Exception as e:
        reply = f"Error: {e}"

    typing.delete()

    ui.session_state.chat_history.append({"role": "assistant", "content": reply})
    refresh_chat()


def refresh_chat():
    chat_area.clear()

    for msg in ui.session_state.chat_history:
        if msg["role"] == "doctor":
            ui.label(f"Doctor: {msg['content']}", parent=chat_area)\
                .classes("bg-blue-100 p-2 rounded-lg my-1 max-w-full text-sm")
        else:
            ui.label(f"AI: {msg['content']}", parent=chat_area)\
                .classes("bg-green-100 p-2 rounded-lg my-1 max-w-full text-sm")


with ui.column().classes(
    "w-full max-w-lg mx-auto p-4 gap-2"
):  
    # full width on phones, centered on desktop, limited width
    ui.label("Medical Diagnostic Chatbot")\
        .classes("text-h6 text-center")

    ui.label("Enter symptoms, observations, or test findings.")\
        .classes("text-gray-600 text-sm text-center")

    chat_area = ui.column()\
        .classes("border rounded p-3 h-[65vh] overflow-y-auto bg-white")

    with ui.row().classes("w-full items-center gap-2"):
        input_box = ui.input(
            placeholder="Describe symptoms..."
        ).classes("flex-grow text-sm")

        ui.button("Send", on_click=send_message)\
            .classes("bg-blue-500 text-white px-4 py-2 rounded-lg text-sm")

ui.run()
```

---

# üßæ Explanation (frontend)

### ‚úî `w-full max-w-lg mx-auto`

This is the key that makes design mobile-friendly:

* **w-full** ‚Üí take full phone width
* **max-w-lg** ‚Üí do not become too wide on desktop
* **mx-auto** ‚Üí center it on large screens

This instantly fixes layout for all devices.

---

### ‚úî `h-[65vh]`

This means:

> Take 65% of the device height.

So the chat area fills most of the phone screen.

---

### ‚úî Touch-friendly input + button

```python
ui.input(...).classes("flex-grow text-sm")
ui.button(...).classes("px-4 py-2 rounded-lg")
```

Buttons become easier to tap with fingers.

---

### ‚úî Smaller font on mobile

`text-sm` ensures things fit well.

---

### ‚úî Bubbles with rounded corners

Looks like WhatsApp and easier to read.

---

---

# ‚≠ê PART B ‚Äî Improving the backend for mobile support

Good news:
**No changes needed!**

Web or mobile ‚Üí backend stays the same.

Everything is handled in frontend UI.

---

# ‚≠ê PART C ‚Äî Testing on mobile

### There are 3 simple ways:

---

## **Option 1 ‚Äî Use your phone's browser (same Wi-Fi)**

1. Find your computer‚Äôs IP address
2. Run NiceGUI on host:

```bash
python diagnostic_ui_mobile.py --host 0.0.0.0
```

3. Open on phone:

```
http://<your-ip>:8080
```

---

## **Option 2 ‚Äî Use Chrome's mobile simulator**

1. Open Chrome
2. Press **F12**
3. Click **Toggle Device Toolbar**
4. Select a phone model (iPhone 12 / Galaxy, etc.)
5. Resize and test your UI

---

## **Option 3 ‚Äî Use your tablet**

Open the same URL as above.

---

# üí° Tips for Real-World Medical App

### ‚úî Tip 1 ‚Äî Avoid too much text

Large paragraphs fill mobile screen quickly.
Use shorter, clearer replies.

---

### ‚úî Tip 2 ‚Äî Use collapsible sections

For lab summaries, test lists, or differential diagnosis.

---

### ‚úî Tip 3 ‚Äî Auto-scroll to bottom

NiceGUI automatically scrolls with `.classes("overflow-y-auto")`.

---

### ‚úî Tip 4 ‚Äî Add a floating ‚Äúback to top‚Äù button

For long chats.

---

### ‚úî Tip 5 ‚Äî Use emojis sparingly

Doctors prefer a professional look.
But light highlights (‚úî, ‚ö†Ô∏è) help clarity.

---

# üéâ Summary

In this lesson, you learned how to:

* make your NiceGUI medical chatbot responsive
* adjust width, height, padding, and font sizes
* make buttons touch-friendly
* support chat history scrolling
* test on real phones or browser mobile simulator

Your chatbot now behaves beautifully on **mobile**, which is essential for real doctors and patients.

---

