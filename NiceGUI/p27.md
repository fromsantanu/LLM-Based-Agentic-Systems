# **Lesson 27 â€” Interactive Tables (Sorting, Filtering & Searching)**

## â­ What you will learn in this lesson

In this lesson, you will learn how to make your NiceGUI tables **interactive**.

You will add:

* **Sorting** â†’ click a column to sort it
* **Search box** â†’ type a name or word to filter rows
* **Dropdown filters** â†’ show only matching items

This makes your dashboard feel modern and easy to useâ€”just like tables on real hospital or clinic systems.

---

# ğŸ§  Real-life example

Imagine a doctor opening a table of 200 patients.
He wants to quickly find:

* â€œShow only female patientsâ€
* â€œSort by age, highest firstâ€
* â€œSearch for a patient named â€˜Anitaâ€™â€

Interactive tables help the doctor find the right information in **seconds**.

---

# **Step-by-step: Letâ€™s build it**

We will make:

* A patient table
* A search box
* A gender filter (dropdown)
* Click-to-sort feature

All using very simple NiceGUI code.

---

# âœ… Step 1: Install NiceGUI

(If already installed, skip this)

```bash
pip install nicegui
```

---

# âœ… Step 2: Write the interactive table code

Create a file named:
**lesson27_interactive_tables.py**

Paste this code:

```python
from nicegui import ui

# Sample data
patients = [
    {"id": 1, "name": "Rohan Das", "age": 32, "gender": "M"},
    {"id": 2, "name": "Anita Roy", "age": 45, "gender": "F"},
    {"id": 3, "name": "Sanjay Gupta", "age": 60, "gender": "M"},
    {"id": 4, "name": "Priya Sen", "age": 29, "gender": "F"},
    {"id": 5, "name": "Amit Bose", "age": 50, "gender": "M"},
]

def apply_filters(search_text, gender_filter, table):
    # filter by search
    filtered = [
        p for p in patients
        if search_text.lower() in p["name"].lower()
    ]

    # filter by gender
    if gender_filter != "All":
        filtered = [p for p in filtered if p["gender"] == gender_filter]

    table.rows = filtered

with ui.page("/"):
    ui.label("Interactive Patient Table").classes("text-2xl")

    # Search bar
    search = ui.input("Search by name...").classes("w-64")

    # Gender filter
    gender = ui.select(
        ["All", "M", "F"],
        value="All",
        label="Gender"
    ).classes("w-32")

    # Table with sorting enabled
    table = ui.table(
        columns=[
            {"name": "id", "label": "ID", "field": "id", "sortable": True},
            {"name": "name", "label": "Name", "field": "name", "sortable": True},
            {"name": "age", "label": "Age", "field": "age", "sortable": True},
            {"name": "gender", "label": "Gender", "field": "gender", "sortable": True},
        ],
        rows=patients,
    )

    # Refresh table whenever search OR gender changes
    def refresh():
        apply_filters(search.value or "", gender.value, table)

    search.on("input", refresh)
    gender.on("change", refresh)

ui.run()
```

---

# âœ¨ Explanation in simple words

Letâ€™s go through the important parts gently.

---

## 1ï¸âƒ£ Sample patients

```python
patients = [...]
```

Just a simple list where each patient has:

* id
* name
* age
* gender

This is our table data.

---

## 2ï¸âƒ£ The filter function

```python
def apply_filters(search_text, gender_filter, table):
```

This function updates the table based on:

* what you typed in the search box
* what you selected in the gender dropdown

### Filtering by name

```python
filtered = [
    p for p in patients
    if search_text.lower() in p["name"].lower()
]
```

This catches partial matches like â€œanâ€ â†’ â€œAnitaâ€, â€œSanjayâ€.

---

### Filtering by gender

```python
if gender_filter != "All":
    filtered = [p for p in filtered if p["gender"] == gender_filter]
```

So if a doctor selects â€œFâ€, it will show only female patients.

---

### Update the table

```python
table.rows = filtered
```

This changes what the table is showing.

---

## 3ï¸âƒ£ Search box

```python
search = ui.input("Search by name...")
```

Whenever the user types something, we call `refresh()`.

---

## 4ï¸âƒ£ Dropdown filter

```python
gender = ui.select(["All", "M", "F"], value="All")
```

Allows the doctor to quickly filter by gender.

---

## 5ï¸âƒ£ Making table sortable

```python
columns=[
    {"name": "age", "label": "Age", "field": "age", "sortable": True},
]
```

Now the doctor can click **Age**, **Name**, or **ID** column to sort the table.

---

## 6ï¸âƒ£ Automatically refresh when filters change

```python
search.on("input", refresh)
gender.on("change", refresh)
```

This means:

* When the user types â†’ table updates
* When the user chooses a gender â†’ table updates

No button needed.

---

## 7ï¸âƒ£ Run the app

```python
ui.run()
```

---

# ğŸš€ How to run and test

1. Save the file as
   `lesson27_interactive_tables.py`

2. In your terminal, run:

```bash
python lesson27_interactive_tables.py
```

3. Open:

```
http://localhost:8080
```

Try these:

* Type â€œanâ€ â†’ see only matching names
* Choose â€œFâ€ â†’ table shows only female patients
* Click the â€œAgeâ€ column â†’ sort by age
* Click â€œNameâ€ â†’ sort alphabetically

Your table is now fully interactive!

---

# ğŸ’¡ Tips & Best Practices

### âœ” Tip 1 â€” Always filter in memory first

Filtering lists in Python is simple and fast.
Great for small dashboards.

---

### âœ” Tip 2 â€” When using a database, do filtering at the database level

For bigger real systems, you will:

* send the filter value to backend
* run a SQL query
* return the filtered results

This keeps things fast even with thousands of records.

---

### âœ” Tip 3 â€” Add more filters later

You can add filters for:

* Age range
* Last visit
* Medical conditions
* City / State

Just one or two extra lines.

---
