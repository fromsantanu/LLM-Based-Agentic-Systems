# **Lesson 45: Running a NiceGUI App in Docker**

In this lesson, you will learn how to **package your NiceGUI + FastAPI app inside Docker** so it can run anywhere — your laptop, a server, or the cloud.

Think of Docker like a **tiffin box**:

* You pack your application and everything it needs into one box.
* You can take it anywhere, and it will always behave the same.

---

# **1. What we will build**

We will take the same app from Lesson 44 (NiceGUI + FastAPI) and:

* Put it inside a Docker image
* Run it as a container
* Access the app from the browser

The steps are very simple, even for beginners.

---

# **2. Project structure**

Create a folder:

```
my_nicegui_app/
    main.py
    requirements.txt
    Dockerfile
```

---

# **3. Create `main.py`**

Use the same example from Lesson 44:

```python
from fastapi import FastAPI
from nicegui import ui

app = FastAPI()

@app.get('/api/hello')
def hello():
    return {'message': 'Hello from FastAPI and NiceGUI inside Docker!'}

@ui.page('/')
def index_page():
    ui.label('NiceGUI running from a Docker container')
    ui.button('Click me', on_click=lambda: ui.notify('Container works!'))

ui.run_with(
    app,
    title='NiceGUI Docker Demo'
)
```

---

# **4. Create `requirements.txt`**

Create a file called `requirements.txt`:

```
nicegui
fastapi
uvicorn[standard]
```

This tells Docker what Python packages your app needs.

---

# **5. Create `Dockerfile`**

This file explains to Docker how to build your image.

Create a file named:

```
Dockerfile
```

Put this inside:

```dockerfile
# 1) Use an official Python image
FROM python:3.11-slim

# 2) Create a working folder inside the container
WORKDIR /app

# 3) Copy requirement files first (for caching)
COPY requirements.txt .

# 4) Install the required packages
RUN pip install --no-cache-dir -r requirements.txt

# 5) Copy the rest of the files
COPY . .

# 6) Expose port 8000 (default for uvicorn)
EXPOSE 8000

# 7) Start the app
CMD ["uvicorn", "main:app", "--host", "0.0.0.0", "--port", "8000"]
```

Simple explanation:

* Use Python 3.11
* Install dependencies
* Copy your app
* Run uvicorn so NiceGUI + FastAPI start inside Docker

---

# **6. Build your Docker image**

Open your terminal in the folder and run:

```bash
docker build -t nicegui-demo .
```

Explanation:

* `-t nicegui-demo` gives your image a name
* `.` means “build using the files in this folder”

---

# **7. Run the Docker container**

Now run your app:

```bash
docker run -p 8000:8000 nicegui-demo
```

Explanation:

* `-p 8000:8000` → maps container port 8000 to your computer port 8000
* You can now open the app in your browser:

**[http://localhost:8000](http://localhost:8000)**

You should see your NiceGUI page.

---

# **8. Test the API inside Docker**

Open this URL:

**[http://localhost:8000/api/hello](http://localhost:8000/api/hello)**

You will see:

```json
{"message": "Hello from FastAPI and NiceGUI inside Docker!"}
```

---

# **9. Optional: Run in background (detached mode)**

If you want your container to run in the background:

```bash
docker run -d -p 8000:8000 nicegui-demo
```

---

# **10. Optional: Restart on server reboot**

If you deploy to a VPS (like AWS, DigitalOcean, Hostinger) you can keep it auto-running:

```bash
docker run -d --restart always -p 8000:8000 nicegui-demo
```

---

# **11. Tips & best practices**

### **Tip 1: Keep your image small**

Use `python:3.11-slim` or `alpine` versions to reduce size.

### **Tip 2: Use `.dockerignore`**

Create a `.dockerignore` file so Docker does not copy unwanted files:

```
__pycache__
*.pyc
.env
.git
```

### **Tip 3: Use docker-compose for bigger systems**

Later you can add:

* Database
* Redis
* Queue workers
* Separate backend

All controlled from a single `docker-compose.yml`.

---

