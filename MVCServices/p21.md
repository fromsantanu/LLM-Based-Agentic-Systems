# **Chapter 21 — Docs & Onboarding**

### 🎯 **Goal**

Make your project understandable to new contributors (or even your future self) by maintaining:

* A clear `README.md`
* A visual **architecture diagram**
* A set of **Architecture Decision Records (ADRs)** documenting key design choices

---

## **1. Why Documentation Matters**

Good code speaks for itself — but great documentation **speaks for the project**.

Without onboarding docs, even you (after a few months) may forget how your own system fits together.

Documentation helps:

* New developers set up quickly
* Reviewers understand reasoning behind architecture
* Maintainers add new modules confidently

---

## **2. README.md — The Front Door**

A strong `README.md` is a **mini-website** for your repository.
It should answer:

> “What is this project, how do I run it, and how can I extend it?”

### 🧱 **Suggested README Structure**

````markdown
# 🏥 Health Assistant Platform

A modular MVC-style app using FastAPI + Streamlit/Dash + SQLite backend.

## 🚀 Quick Start

```bash
git clone https://github.com/yourname/health-assistant.git
cd health-assistant
pip install -r requirements.txt
streamlit run app.py
````

## 🧩 Architecture Overview

* **UI:** Streamlit or Dash (pages/, views/)
* **Controller:** Handles session_state, events (controllers/)
* **Service Layer:** Business logic (services/)
* **Repository:** DB/API access (repositories/)
* **Models/DTOs:** Pydantic schemas for data validation (models/)

![](docs/architecture-diagram.png)

## 🧠 Key Concepts

* **DTOs:** Enforce stable request/response structures
* **Repositories:** Isolate all DB/API access
* **Services:** Contain pure, testable logic
* **Controllers:** Bridge between services and UI

## 🧪 Testing

```bash
pytest --maxfail=1 --disable-warnings -q
```

## 🛠️ How to Add a New Page/Service

(see section below 👇)

## 📄 License

MIT License

```

---

## **3. Architecture Diagram**

A diagram communicates faster than 500 words.

### 🖼️ Example Layout
```

+---------------------------+
|         UI Layer          |
|  (Streamlit / Dash Pages) |
+------------+--------------+
|
v
+---------------------------+
|      Controller Layer     |
|  Actions, Session State   |
+------------+--------------+
|
v
+---------------------------+
|       Service Layer       |
| Business Rules, DTO Logic |
+------------+--------------+
|
v
+---------------------------+
|      Repository Layer     |
| SQLite / API / Filesystem |
+---------------------------+

````

📁 Save this diagram as `docs/architecture-diagram.png`.

---

## **4. Architecture Decision Records (ADRs)**

ADRs are **short markdown files** describing key architectural decisions.

### 📘 Example: `docs/adr/0001-use-pydantic-for-dtos.md`

```markdown
# ADR 0001: Use Pydantic for DTOs

## Context
We need a consistent way to validate inputs/outputs between layers.

## Decision
We will use `pydantic.BaseModel` for all DTOs and config objects.

## Consequences
✅ Enforced data validation  
✅ Clear typing between layers  
⚠️ Adds dependency on Pydantic
````

👉 Each decision gets its own numbered file.
You can later add ADRs like:

* 0002: Adopt Repository-Service-Controller pattern
* 0003: Use Streamlit for Admin UI
* 0004: Cache read operations with `st.cache_data`

---

## **5. Onboarding Guide: Adding a New Page or Service**

Here’s what every contributor should know.

### ⚙️ **Steps: Add a New Page**

1. **Create a new file in `pages/`**

   ```bash
   touch pages/3_Reports.py
   ```

2. **Add UI layout**

   ```python
   import streamlit as st
   from controllers.reports import get_report_data

   st.title("📊 Reports")
   df = get_report_data()
   st.dataframe(df)
   ```

3. **Create corresponding controller**

   ```python
   # controllers/reports.py
   from services.reports import generate_report

   def get_report_data():
       return generate_report()
   ```

4. **Add service function**

   ```python
   # services/reports.py
   from repositories.db import fetch_report_rows

   def generate_report():
       rows = fetch_report_rows()
       return rows
   ```

5. **Extend repository if needed**

   ```python
   # repositories/db.py
   def fetch_report_rows():
       # SELECT query or API call
       return ...
   ```

6. **(Optional)** Add tests in `tests/test_reports.py`.

7. **Update README**

   * Add a new entry under “Available Pages”
   * Mention new controller/service structure

---

### ⚙️ **Steps: Add a New Service (Backend Only)**

1. Add logic under `services/new_service.py`.
2. Add corresponding DTOs under `models/`.
3. Create or extend repository functions.
4. Add unit tests under `tests/`.
5. Document it in `README` and/or `docs/adr`.

---

## **6. Lab Exercise**

🧪 **Lab: Add “How to Add a New Page/Service” Guide to README**

**Task:**
Add a section titled **“How to Extend the System”** to your project’s `README.md`.

**Include:**

* File structure overview
* Step-by-step guide (as above)
* A note on keeping ADRs updated

✅ **Bonus:**
Add a visual **architecture diagram** (made in Draw.io or Mermaid).

---

## **7. Checklist for a Professional Project**

| Area                               | Check |
| ---------------------------------- | ----- |
| ✅ README.md with setup & structure | ☐     |
| ✅ Architecture diagram under /docs | ☐     |
| ✅ ADRs for major decisions         | ☐     |
| ✅ “How to add new feature” guide   | ☐     |
| ✅ Testing instructions             | ☐     |

---

## **8. Summary**

Documentation is not decoration — it’s the **continuity layer** of your project.
A well-structured README, diagram, and ADR set turns a personal script into a **maintainable software system**.

---

### 🔖 **Next Steps**

* Add a `/docs` folder with your diagram and ADRs.
* Review your README — can a new developer start in 10 minutes?
* Practice adding one new “Report Page” following the documented process.

---
