# Chapter 24: Customer Support Assistant

Customer support systems are a perfect fit for **LangGraph** since they often involve multi-step workflows, conditional logic, and human escalation.
Letâ€™s walk through building a **Customer Support Assistant** that classifies queries, answers FAQs, and escalates when necessary.

---

## ðŸ”¹ Key Concepts

1. **Classification Node**

   * Identify the type of query (FAQ, complaint, billing, technical issue).
   * Route to the appropriate path.

2. **FAQ Retrieval Node**

   * Search a knowledge base or vector store.
   * Provide direct answers for common queries.

3. **Escalation Node**

   * Hand off to human support if issue is unresolved.
   * Collect structured details before escalation.

4. **Fallback Handling**

   * If no confident answer is found â†’ escalate gracefully.
   * Ensure user never gets stuck.

---

## ðŸ”¹ Example Workflow

```python
from langgraph.graph import StateGraph, END

# Define state
class SupportState(dict):
    query: str
    category: str
    answer: str
    escalation: bool

# Dummy classification function
def classify_query(state: SupportState):
    text = state["query"].lower()
    if "refund" in text or "payment" in text:
        state["category"] = "billing"
    elif "error" in text or "not working" in text:
        state["category"] = "technical"
    elif "hours" in text or "address" in text:
        state["category"] = "faq"
    else:
        state["category"] = "other"
    return state

# FAQ retrieval function
def faq_retriever(state: SupportState):
    faq_db = {
        "hours": "We are open Monâ€“Fri, 9amâ€“6pm.",
        "address": "Our office is at 123 Oxford Street, London."
    }
    for key, ans in faq_db.items():
        if key in state["query"].lower():
            state["answer"] = ans
            state["escalation"] = False
            return state
    state["answer"] = None
    state["escalation"] = True
    return state

# Escalation handler
def escalate(state: SupportState):
    state["answer"] = "Iâ€™m escalating this to a human support agent. Please hold on."
    state["escalation"] = True
    return state

# Build the graph
workflow = StateGraph(SupportState)

workflow.add_node("classify", classify_query)
workflow.add_node("faq", faq_retriever)
workflow.add_node("escalate", escalate)

# Edges
workflow.add_edge("classify", "faq")
workflow.add_conditional_edges(
    "faq",
    lambda state: "escalate" if state["escalation"] else END
)

workflow.set_entry_point("classify")
app = workflow.compile()

# Run example
result = app.invoke({"query": "What are your office hours?"})
print(result["answer"])
```

---

## ðŸ”¹ Example Interaction

**User:** What are your office hours?
**Assistant:** We are open Monâ€“Fri, 9amâ€“6pm.

**User:** My payment failed, can you help?
**Assistant:** Iâ€™m escalating this to a human support agent. Please hold on.

---

## ðŸ”¹ Extensions

* Add **sentiment analysis** before escalation (urgent cases prioritized).
* Store conversations in a **database** for agent handoff.
* Multi-channel support: integrate with email, chat, WhatsApp.
* Include **self-service options** (password reset links, forms).

---

âœ… With LangGraph, you can build **robust support assistants** that mix automation with smooth human escalation.

---
