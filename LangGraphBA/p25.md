# Chapter 25: Medical Triage System

A **medical triage system** routes patients through structured decision-making steps, ensuring efficient handling of intake, diagnosis, and care recommendations. With LangGraph, you can model each stage as nodes in a workflow, making the process modular, scalable, and auditable.

---

## Workflow Stages

1. **Intake**

   * Collect patient data (demographics, vitals, history, free-text symptoms).
   * Can be connected to structured forms or voice-to-text capture.
   * Output: standardized patient record in JSON format.

2. **Symptom Classifier**

   * LLM or rule-based node to classify symptoms into categories (e.g., respiratory, gastrointestinal, trauma).
   * Can apply urgency tagging (e.g., *critical*, *urgent*, *non-urgent*).
   * Output: structured classification and severity level.

3. **Diagnostic**

   * Uses condition-specific reasoning subgraphs (e.g., chest pain â†’ cardiac vs respiratory vs musculoskeletal).
   * Pulls from medical knowledge bases, guidelines, or hospital-specific protocols.
   * Can pause at this stage for lab results or human-in-the-loop doctor review.

4. **Recommendation**

   * Suggests next steps:

     * Home care instructions.
     * Outpatient referral.
     * Emergency escalation.
   * Always paired with disclaimers for safety and liability.

---

## Example Graph

```python
from langgraph.graph import StateGraph, END

# Define state
class TriageState(dict): pass

# Build graph
graph = StateGraph(TriageState)

def intake_node(state):
    state["patient"] = {"name": "John", "age": 45, "symptom": "chest pain"}
    return state

def classifier_node(state):
    symptom = state["patient"]["symptom"]
    if "chest" in symptom:
        state["classification"] = {"system": "cardiac/respiratory", "severity": "urgent"}
    return state

def diagnostic_node(state):
    if state["classification"]["system"] == "cardiac/respiratory":
        state["diagnostic"] = "Possible angina, needs ECG"
    return state

def recommendation_node(state):
    if state["classification"]["severity"] == "urgent":
        state["recommendation"] = "Send to ER immediately"
    else:
        state["recommendation"] = "Outpatient follow-up"
    return state

# Add nodes
graph.add_node("intake", intake_node)
graph.add_node("classifier", classifier_node)
graph.add_node("diagnostic", diagnostic_node)
graph.add_node("recommendation", recommendation_node)

# Define flow
graph.add_edge("intake", "classifier")
graph.add_edge("classifier", "diagnostic")
graph.add_edge("diagnostic", "recommendation")
graph.add_edge("recommendation", END)

# Set entry point
graph.set_entry_point("intake")

app = graph.compile()
result = app.invoke({})
print(result)
```

---

## Key Takeaways

* **Structured flow** mirrors clinical reasoning.
* **Classifier node** ensures scalable handling of varied symptoms.
* **Diagnostic node** allows modular subgraphs per condition.
* **Pause/resume** supports lab results or doctor approvals.
* **Safety layers** (disclaimers, escalation rules) are essential for real-world use.

---

ðŸ”¹ **Example Use Case**: A hospital chatbot that receives patient intake via WhatsApp â†’ classifies symptoms â†’ generates preliminary triage recommendation â†’ forwards urgent cases to an on-call doctor.

---
