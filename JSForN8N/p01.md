# 🧩 **Chapter 1 – Core Concepts You Actually Need**

In n8n, you’ll frequently write JavaScript snippets inside **Function** or **Code** nodes to transform data, loop through items, or control logic flow between nodes.
This chapter gives you the **minimum yet complete foundation** you need to confidently write and debug JavaScript within that environment.

---

## 🧠 1.1 What is JavaScript and How It Runs in n8n

JavaScript is the **scripting language** used inside n8n’s **Node.js** runtime.
It’s not running in a browser, so:

* There’s **no `window`, `document`, or DOM`.**
* You **can use Node.js features** like `Date`, `Math`, `JSON`, and object manipulation.
* Every Function/Code node in n8n runs **independently per item**, meaning each item from the input data is processed separately unless you use **“Run Once for All Items.”**

✅ **Example:**

```javascript
// Inside n8n Function node
return [{ message: "Hello from Node.js inside n8n!" }];
```

---

## 💡 1.2 Variables — `let`, `const`, `var`

Variables store data.
Use them correctly to avoid scope issues and confusion.

| Keyword | Meaning                        | Reassignable | Scope    |
| ------- | ------------------------------ | ------------ | -------- |
| `const` | Constant (value cannot change) | ❌ No         | Block    |
| `let`   | Normal variable                | ✅ Yes        | Block    |
| `var`   | Old style (avoid using)        | ✅ Yes        | Function |

✅ **Example:**

```javascript
const name = "Santanu";
let age = 35;
var city = "Kolkata";

age = 36; // OK
// name = "Apala"; // ❌ Error - const cannot be reassigned
```

**In n8n best practice:**
Always use `const` unless you plan to reassign a value — then use `let`.

---

## 🧱 1.3 Data Types

JavaScript is **dynamically typed**, meaning you don’t declare data types explicitly.

| Type      | Example                         |
| --------- | ------------------------------- |
| String    | `"Hello"`                       |
| Number    | `45`, `3.14`                    |
| Boolean   | `true`, `false`                 |
| Array     | `["apple", "banana", "cherry"]` |
| Object    | `{ name: "Santanu", age: 35 }`  |
| Null      | `null`                          |
| Undefined | `let x;` (no value yet)         |

✅ **Example:**

```javascript
const person = {
  name: "Mimi",
  hobbies: ["music", "coding"],
  age: 24
};

return [{ info: `${person.name} loves ${person.hobbies[0]}` }];
```

---

## ➕ 1.4 Operators

| Type       | Examples                           | Purpose        |        |                    |
| ---------- | ---------------------------------- | -------------- | ------ | ------------------ |
| Arithmetic | `+`, `-`, `*`, `/`, `%`            | Math           |        |                    |
| Comparison | `==`, `===`, `!=`, `!==`, `<`, `>` | Compare values |        |                    |
| Logical    | `&&`, `                            |                | `, `!` | Combine conditions |

✅ **Example:**

```javascript
const temp = 39;
if (temp > 38 && temp < 42) {
  return [{ message: "Possible fever" }];
} else {
  return [{ message: "Normal temperature" }];
}
```

---

## 🔀 1.5 Conditional Statements

Control the flow of logic based on conditions.

### `if / else if / else`

```javascript
const score = 82;

if (score >= 90) {
  return [{ grade: "A" }];
} else if (score >= 75) {
  return [{ grade: "B" }];
} else {
  return [{ grade: "C" }];
}
```

### `switch`

```javascript
const role = "doctor";
switch (role) {
  case "doctor":
    return [{ task: "Review patients" }];
  case "nurse":
    return [{ task: "Assist in ward" }];
  default:
    return [{ task: "General duties" }];
}
```

---

## 🔁 1.6 Loops

Loops help you iterate through lists or objects.

### `for`

```javascript
const arr = [1, 2, 3];
for (let i = 0; i < arr.length; i++) {
  console.log(arr[i]);
}
```

### `for...of` (best for arrays)

```javascript
const fruits = ["apple", "banana", "cherry"];
for (const fruit of fruits) {
  console.log(fruit);
}
```

### `for...in` (for objects)

```javascript
const person = { name: "Mita", age: 56 };
for (const key in person) {
  console.log(`${key}: ${person[key]}`);
}
```

---

## ⚙️ 1.7 Functions and Arrow Functions

Functions are reusable blocks of code.

### Regular Function

```javascript
function add(a, b) {
  return a + b;
}

return [{ result: add(5, 7) }];
```

### Arrow Function

```javascript
const multiply = (x, y) => x * y;
return [{ result: multiply(3, 4) }];
```

💡 **Tip:**
Arrow functions are shorter and automatically bind `this`, which is rarely needed inside n8n, but they make your code concise.

---

## 🌍 1.8 Scope (Local vs Global)

* **Local Scope:** Variables defined inside a block `{}` — not accessible outside.
* **Global Scope:** Variables defined outside any function/block — accessible everywhere.

✅ **Example:**

```javascript
let globalVar = "I'm global";

function show() {
  let localVar = "I'm local";
  console.log(globalVar); // ✅ OK
  console.log(localVar);  // ✅ OK
}

show();
// console.log(localVar); ❌ Error
```

---

## 💬 1.9 Template Literals (Backticks ``)

Used for easy string concatenation and multi-line strings.

✅ **Example:**

```javascript
const name = "Mimi";
const age = 24;

return [{
  message: `Hello ${name}, you are ${age} years old.`
}];
```

---

## ✅ **Summary**

| Concept                | Why It Matters in n8n                    |
| ---------------------- | ---------------------------------------- |
| Variables & Data Types | Handle dynamic workflow data             |
| Operators & Conditions | Filter, branch, and validate inputs      |
| Loops                  | Process arrays and collections           |
| Functions              | Reuse logic inside one node              |
| Scope                  | Avoid overwriting global items           |
| Template Literals      | Generate dynamic messages or JSON fields |

---

## 🧩 **Mini Exercise**

1. Inside an n8n **Function** node, write code to:

   * Read `name` and `temperature` from input JSON.
   * If temperature > 38, return `"${name} has fever"`.
   * Else return `"${name} is normal"`.

💡 *Hint:* use `if`, template literals, and `return [{ message: ... }]`

---


