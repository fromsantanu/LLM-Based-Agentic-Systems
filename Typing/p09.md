# Chapter 9: Runtime Checking vs Static Checking

Type hints in Python are primarily **for developers and tools** ‚Äî they do not change how Python executes code. This means type errors **won‚Äôt stop your program at runtime**, but tools like `mypy` and `pyright` can detect them **before execution**.

---

## 1. Static vs Runtime Checking

* **Static Checking**

  * Happens *before running* the program.
  * Uses tools (like `mypy`, `pyright`) to catch type mismatches.
  * Example: `mypy` will complain if a function expects `int` but you pass `str`.

* **Runtime Checking**

  * Happens *while running*.
  * Python itself doesn‚Äôt enforce type hints at runtime.
  * You can manually check types with `isinstance()` but it has limitations.

---

## 2. Example: Type hints are not enforced at runtime

```python
def add_numbers(a: int, b: int) -> int:
    return a + b

# This works fine, even though it's wrong!
print(add_numbers("10", "20"))  # Output: '1020' (string concatenation!)
```

üëâ Python does **not** raise an error ‚Äî type hints are just metadata.

---

## 3. Using `isinstance()` for runtime checks

```python
def add_numbers(a: int, b: int) -> int:
    if not isinstance(a, int) or not isinstance(b, int):
        raise TypeError("Both arguments must be integers")
    return a + b

print(add_numbers(10, 20))    # ‚úÖ 30
print(add_numbers("10", "20"))  # ‚ùå TypeError
```

### Limitations of `isinstance()`

* Cannot check **complex types** like `List[int]`, `Dict[str, float]`.
* Works only for base types, not generic type hints.

Example:

```python
from typing import List

numbers: List[int] = [1, 2, 3]

print(isinstance(numbers, list))  # ‚úÖ True
# But we can't check if it's specifically List[int]
```

---

## 4. Static Checking with `mypy`

`mypy` is a static type checker for Python.

### Installation

```bash
pip install mypy
```

### Example

```python
def greet(name: str) -> str:
    return "Hello " + name

greet(123)  # ‚ùå Wrong type
```

Run `mypy`:

```bash
mypy example.py
```

Output:

```
error: Argument 1 to "greet" has incompatible type "int"; expected "str"
```

üëâ Unlike Python runtime, `mypy` **catches the bug before execution**.

---

## 5. Static Checking with `pyright`

`pyright` is another type checker (faster, works well in VSCode).

### Installation

```bash
npm install -g pyright
```

### Example

```python
from typing import Dict

def get_price(products: Dict[str, float], name: str) -> float:
    return products[name]

items = {"apple": 1.2, "banana": 0.5}
print(get_price(items, "apple"))   # ‚úÖ Works
print(get_price(items, 100))       # ‚ùå Wrong type
```

Run `pyright`:

```bash
pyright example.py
```

Output:

```
error: Argument of type "int" cannot be assigned to parameter "name" of type "str"
```

---

## 6. When to Use Runtime vs Static Checking

* Use **static checkers** (`mypy`, `pyright`) for **development safety**.
* Use **runtime checks** (`isinstance()`, custom validation) only when:

  * Input comes from **untrusted sources** (e.g., user input, API data).
  * You need **defensive programming**.

---

‚úÖ **Summary**

* Type hints are not enforced at runtime.
* `isinstance()` works but has **limitations**.
* `mypy` and `pyright` catch mistakes **before running the code**.
* Best practice: **Combine static analysis with selective runtime validation** for robust code.

---
