# ğŸ“˜ Chapter 10: Using Supabase with JavaScript

### *(Connecting your app to Supabase)*

In this chapter, we connect a **JavaScript app** to Supabase and do basic work:

* Connect safely
* Read data
* Add data
* Update and delete data
* Understand errors

No advanced coding â€” only **clear ideas with small examples**.

---

## 1ï¸âƒ£ Why JavaScript + Supabase?

JavaScript is used in:

* Websites
* Dashboards
* Admin panels
* Small tools

Supabase provides an official JavaScript library that makes API calls **simple and safe**.

That library is the **Supabase JavaScript client**.

ğŸ“Œ Think of it as:

* A **friendly translator**
* Between your JavaScript app and Supabase APIs

---

## 2ï¸âƒ£ What You Need to Connect

You need **two things** (from Chapter 3):

1. **Project URL**
2. **Public anon key**

ğŸ‘‰ These two together tell your app:

* *Where* Supabase is
* *What level of access* it has

âš ï¸ Important reminder:

> **Never use the service role key in JavaScript frontend**

---

## 3ï¸âƒ£ Creating a Supabase Client (Concept)

In JavaScript, you:

* Import the Supabase client
* Pass URL and anon key
* Reuse this client everywhere

ğŸ“Œ Analogy:

* You save the office address and visitor pass
* Then use them whenever you need to talk to the office

Once created, this client can:

* Talk to Auth
* Talk to Database
* Talk to Storage

---

## 4ï¸âƒ£ Reading Data (SELECT)

### Goal:

ğŸ‘‰ â€œGet rows from a tableâ€

Example idea (plain English):

* Go to `students` table
* Fetch all students
* Show them on screen

ğŸ“Œ What happens behind the scenes:

1. JavaScript sends request
2. Supabase checks login (if any)
3. RLS checks permission
4. Data is returned (or blocked)

If **nothing comes back**:

* It is usually **RLS**, not a bug

---

## 5ï¸âƒ£ Adding Data (INSERT)

### Goal:

ğŸ‘‰ â€œAdd a new rowâ€

Example idea:

* Insert a new student:

  * name
  * age

ğŸ“Œ Important:

* INSERT works **only if** an INSERT policy exists
* Without policy â†’ operation fails silently or with error

ğŸ“Œ Real-life analogy:

* You can submit a form
* Only if submission permission exists

---

## 6ï¸âƒ£ Updating Data (UPDATE)

### Goal:

ğŸ‘‰ â€œChange existing dataâ€

Example idea:

* Update your own profile name

ğŸ“Œ Rules:

* UPDATE works only on rows allowed by RLS
* Usually:

  * Users can update **their own rows**
  * Not othersâ€™ rows

ğŸ“Œ This protects data automatically.

---

## 7ï¸âƒ£ Deleting Data (DELETE)

### Goal:

ğŸ‘‰ â€œRemove a rowâ€

ğŸ“Œ Important warning:

* DELETE is permanent
* RLS still applies

Typical rule:

* Users can delete **only their own data**

ğŸ“Œ Think of it as:

* You can shred **your own file**
* Not someone elseâ€™s

---

## 8ï¸âƒ£ Authentication in JavaScript (Basic Idea)

With the same client, you can:

* Sign up users
* Log in users
* Log out users
* Check if user is logged in

ğŸ“Œ When a user logs in:

* Supabase stores a session
* Requests automatically include identity
* RLS starts working correctly

ğŸ‘‰ **Auth + RLS + API = full security**

---

## 9ï¸âƒ£ Handling Errors (Very Important)

Every Supabase call returns:

* `data` (if successful)
* `error` (if something failed)

ğŸ“Œ Common errors and meaning:

| Error             | Meaning            |
| ----------------- | ------------------ |
| 401 Unauthorized  | User not logged in |
| Permission denied | RLS blocked        |
| Empty result      | RLS blocked        |
| Invalid input     | Data type mismatch |

ğŸ‘‰ Always **check errors**
Never assume success.

---

## ğŸ”Ÿ Local vs Cloud Usage (No Code Change)

Good news ğŸ‰
You **do not change your JavaScript logic**.

Only change:

* Project URL
* Key

ğŸ“Œ Same code works for:

* Local Supabase
* Cloud Supabase

This makes development **very smooth**.

---

## 1ï¸âƒ£1ï¸âƒ£ Common Beginner Mistakes

âŒ Forgetting to check errors
âŒ Assuming login gives full access
âŒ Using service role key in frontend
âŒ Blaming JavaScript when RLS blocks data

ğŸ‘‰ If data doesnâ€™t show:

> **First check RLS**

---

## 1ï¸âƒ£2ï¸âƒ£ Mental Model (Remember This)

* JavaScript â†’ sends request
* Supabase client â†’ formats request
* API â†’ receives request
* Auth â†’ identifies user
* RLS â†’ allows or blocks rows
* Database â†’ returns data

ğŸ“Œ Once this flow is clear, debugging becomes easy.

---

## âœ… Key Takeaways

* Supabase JS client simplifies API usage
* Same client handles Auth + DB + Storage
* RLS controls all data access
* Errors are your best guide
* Local and cloud behave the same

---

### ğŸ”œ Chapter 11 Preview

Next chapter we will cover:

* Using Supabase with backend tools (Node.js / n8n)
* Secure use of service role key
* Automation workflows
* Real backend use cases


