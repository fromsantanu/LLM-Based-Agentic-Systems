# ğŸ“˜ Chapter 16: Backups, Restore & Migrations

### *(Keeping your data safe â€” very important)*

Until now, we focused on **building features**.
Now we focus on **protecting what you build**.

ğŸ‘‰ Data can be recreated
ğŸ‘‰ **Lost data usually cannot**

This chapter explains backups and migrations in a **very practical, non-technical way**.

---

## 1ï¸âƒ£ Why Backups Are Critical (Simple Truth)

Data can be lost due to:

* Mistakes (accidental delete)
* Wrong SQL command
* App bugs
* Resetting local Supabase
* Server or disk issues

ğŸ“Œ Real-life analogy

* Not backing up data is like
  **not keeping photocopies of important documents**

---

## 2ï¸âƒ£ What Exactly Needs Backup in Supabase?

Supabase is built on **PostgreSQL**.

So backups mainly mean:

* Tables
* Rows (data)
* Relationships
* Functions
* Policies (RLS)

ğŸ“Œ Important:

> **Storage files and database data are different things**
> Both need attention.

---

## 3ï¸âƒ£ Cloud Supabase Backups (Managed for You)

When you use **Supabase** Cloud:

* Automatic database backups are enabled
* Point-in-time recovery is available (plan dependent)
* Supabase manages infrastructure

ğŸ“Œ This is like:

* Bank locker with automatic security
* Still, you should be careful what you do

âš ï¸ Backups help, but **do not replace caution**.

---

## 4ï¸âƒ£ What Cloud Backups Do NOT Protect You From

Even in cloud:

âŒ Accidentally deleting rows
âŒ Writing wrong UPDATE without WHERE
âŒ Dropping a table
âŒ Bad migration

ğŸ“Œ Backups help recovery,
but **downtime and confusion still happen**.

ğŸ‘‰ Always double-check destructive actions.

---

## 5ï¸âƒ£ Local Supabase Backups (Your Responsibility)

Local Supabase runs using Docker.

### Important fact:

* Data is stored in **Docker volumes**
* If volumes are deleted â†’ data is gone

ğŸ“Œ Analogy:

* Your office files are inside a cupboard
* If you throw away the cupboard â†’ files are lost

---

### How to Stay Safe Locally (Conceptually)

* Avoid frequent resets
* Backup before experimenting
* Treat local data as important if it matters

ğŸ“Œ Local setup is powerful, but **less forgiving**.

---

## 6ï¸âƒ£ What Is a Migration? (Very Simple)

A **migration** is:
ğŸ‘‰ A **record of database changes**

Examples:

* Creating a table
* Adding a column
* Changing data type
* Adding an index

ğŸ“Œ Analogy:

* Blueprint changes of a building
* So the same building can be rebuilt elsewhere

---

## 7ï¸âƒ£ Why Migrations Are Important

Without migrations:

* You forget what you changed
* Local and cloud differ
* Team members get confused
* Production breaks unexpectedly

With migrations:

* Changes are repeatable
* Changes are documented
* Environment stays consistent

ğŸ“Œ Think of migrations as a **history book of your database**.

---

## 8ï¸âƒ£ Supabase Migration Concept (Big Picture)

Supabase migrations allow you to:

* Define structure changes
* Apply them in correct order
* Recreate database safely

ğŸ“Œ Typical flow:

1. Change database locally
2. Save that change as a migration
3. Apply same change in cloud

ğŸ‘‰ Same structure, different locations.

---

## 9ï¸âƒ£ Backup vs Migration (Very Important Difference)

| Backup            | Migration               |
| ----------------- | ----------------------- |
| Saves data        | Saves structure changes |
| Used for recovery | Used for consistency    |
| One-time snapshot | Step-by-step evolution  |
| Heavy             | Lightweight             |

ğŸ“Œ You need **both**, not one.

---

## ğŸ”Ÿ Safe Working Rules (Must Follow)

### Before doing:

* DROP TABLE
* DELETE many rows
* RESET local Supabase
* Big schema change

ğŸ‘‰ Always ask:

> â€œDo I have a backup or migration?â€

---

## 1ï¸âƒ£1ï¸âƒ£ Common Beginner Mistakes

âŒ Resetting local Supabase without backup
âŒ Editing production tables directly
âŒ Not tracking schema changes
âŒ Assuming cloud backups solve everything

ğŸ‘‰ Most data loss is **human error**, not system failure.

---

## 1ï¸âƒ£2ï¸âƒ£ Simple Safety Checklist

Use this checklist regularly:

âœ… Important data backed up
âœ… Migrations tracked
âœ… Reset used only for practice
âœ… Production touched carefully
âœ… Storage files considered separately

---

## ğŸ§  Mental Model (Remember This)

* **Backups save data**
* **Migrations save structure**
* **Cloud is safer**
* **Local is powerful but risky**
* **Discipline prevents disasters**

---

## âœ… Key Takeaways

* Backups protect your data
* Cloud Supabase provides managed backups
* Local Supabase needs manual care
* Migrations keep environments consistent
* Always think before destructive actions

---

### ğŸ”œ Chapter 17 Preview

Next chapter we will cover:

* Supabase security best practices
* Key management
* Common security pitfalls
* How to think like a safe backend developer


