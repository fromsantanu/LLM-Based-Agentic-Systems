## **Chapter 6. MCP Servers**

### What is an MCP Server?

An **MCP server** is a process that makes context sources, tools, or external resources available to AI models through the Model Context Protocol. It acts as a bridge between the model and the outside world, handling requests and returning structured responses in a standard format.

Key functions of an MCP server include:

* **Context mediation:** Providing access to files, databases, APIs, or sensors.
* **Tool exposure:** Defining callable operations that the model can invoke.
* **Protocol compliance:** Communicating via MCP’s request/response and event-driven standards.
* **Interoperability:** Supporting integration with multiple clients and models without requiring custom APIs.

In essence, MCP servers turn external systems into context sources that models can use seamlessly.

---

### Setting Up an MCP Server

Setting up an MCP server involves several steps:

1. **Environment setup**

   * Install the required MCP libraries or SDKs.
   * Ensure connectivity to the systems you want to expose (e.g., database credentials, API keys).

2. **Server definition**

   * Create a server process that listens on a transport (WebSockets, HTTP/JSON, etc.).
   * Implement handlers for MCP message types:

     * `request` → perform an action and return results.
     * `response` → send structured data back.
     * `event` → notify clients of state changes or new data.

3. **Registering tools and resources**

   * Define schemas for exposed tools (input parameters, output format).
   * Register resources such as files, datasets, or APIs as context providers.

4. **Security and permissions**

   * Apply authentication/authorization as required.
   * Enforce access control to sensitive systems.

5. **Testing**

   * Use an MCP-compatible client to send requests.
   * Verify that the server responds according to protocol standards.

---

### Exposing Tools and Resources via MCP

An MCP server can expose a wide range of tools and resources, depending on the integration needs:

* **Tools (actions):** Functions the model can call, such as *“run a SQL query”*, *“fetch user profile from CRM”*, or *“start a workflow job.”*
* **Resources (contexts):** Structured data that the model can reference, such as documents, database tables, logs, or sensor data.
* **Event streams:** Real-time updates (e.g., file changes, system alerts, new messages in a queue).

By standardizing how tools and resources are described, MCP servers make them discoverable and usable across multiple clients and workflows.

---

### Use Cases: Connecting Databases, APIs, and External Systems

1. **Databases**

   * Expose a PostgreSQL or MySQL database as an MCP resource.
   * Define tools for querying tables, inserting data, or running analytics.
   * Example: A health assistant querying patient records via MCP instead of a direct SQL connection.

2. **APIs**

   * Wrap REST or GraphQL APIs as MCP tools.
   * Input/output schemas define how the model interacts with the API.
   * Example: A weather API exposed as a tool for retrieving forecasts in natural language workflows.

3. **File systems and documents**

   * Register local or cloud file directories as context sources.
   * Provide tools for searching, reading, or updating files.
   * Example: A legal assistant retrieving PDF documents from a case folder.

4. **Enterprise systems**

   * Integrate with CRMs, ERPs, or ticketing platforms.
   * Use event-driven notifications to keep the model aware of changes.
   * Example: An AI sales assistant that updates deal status when a record changes in Salesforce.

5. **IoT and sensors**

   * Connect to device telemetry streams.
   * Provide real-time context for AI-driven monitoring.
   * Example: A factory assistant monitoring sensor data for predictive maintenance.

---

✅ **Summary:**
An MCP server is the gateway that makes external tools, resources, and systems available to AI models in a standardized, discoverable way. Setting one up involves defining protocol-compliant handlers, exposing tools/resources, and ensuring secure integration. With MCP servers, models can reliably access databases, APIs, files, and more, enabling powerful end-to-end workflows.

---
