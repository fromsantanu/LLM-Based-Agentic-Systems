# üß© Chapter 1: Introduction to SQLAlchemy

## 1.1 What is SQLAlchemy?

**SQLAlchemy** is a powerful and flexible **Python library for working with databases**.
It allows you to interact with databases using **Python code instead of raw SQL queries**, while still giving you full control over SQL when needed.

It‚Äôs widely used in both small and large projects because it provides:

* High-level **Object Relational Mapping (ORM)** for mapping Python classes to database tables.
* Low-level **Core (SQL Expression Language)** for direct SQL control and performance optimization.

> üí° Think of SQLAlchemy as a ‚Äúbridge‚Äù between Python and databases ‚Äî you can either walk across the bridge (ORM) or dive deep into the river (Core) depending on your needs.

### ‚úÖ Key Advantages

* Database independence (works with many SQL databases)
* Cleaner, maintainable Python code
* Protection against SQL injection
* Easy migration from development to production databases

---

## 1.2 ORM vs Core

SQLAlchemy has **two main ways** of working with databases ‚Äî **ORM** and **Core**.

| Feature          | ORM (Object Relational Mapper)                  | Core (SQL Expression Language)                                |
| ---------------- | ----------------------------------------------- | ------------------------------------------------------------- |
| **Level**        | High-level abstraction                          | Low-level control                                             |
| **Work Style**   | Works with Python classes and objects           | Works with SQL expressions and constructs                     |
| **Use Case**     | When you want to treat tables as Python objects | When you want to write optimized SQL or fine-tune performance |
| **Example Code** | `User(name='Alice')`                            | `insert(user_table).values(name='Alice')`                     |
| **Ideal For**    | Rapid application development                   | Database-heavy applications or reporting                      |

### üí¨ Analogy:

If the **Core** is like writing SQL directly but in Python,
then the **ORM** is like letting SQLAlchemy write the SQL for you based on your class definitions.

---

## 1.3 Supported Databases and Installation

SQLAlchemy supports almost **all major relational databases**, such as:

| Database             | Connection URL Example                                  |
| -------------------- | ------------------------------------------------------- |
| SQLite               | `sqlite:///example.db`                                  |
| PostgreSQL           | `postgresql://user:password@localhost/mydb`             |
| MySQL                | `mysql+pymysql://user:password@localhost/mydb`          |
| Oracle               | `oracle+cx_oracle://user:password@hostname:port/dbname` |
| Microsoft SQL Server | `mssql+pyodbc://user:password@dsn_name`                 |

### üõ†Ô∏è Installation

To install SQLAlchemy, open your terminal or command prompt and run:

```bash
pip install sqlalchemy
```

If you plan to use it with a specific database (like PostgreSQL or MySQL), install their connectors too:

```bash
pip install psycopg2       # for PostgreSQL
pip install pymysql         # for MySQL
pip install cx_Oracle       # for Oracle
pip install pyodbc          # for SQL Server
```

> üí° Note: For quick learning and testing, **SQLite** is built into Python and requires no setup.

---

## 1.4 Architecture Overview: Engine, Connection, and Session

SQLAlchemy‚Äôs internal architecture revolves around **three main components** that work together:

### 1Ô∏è‚É£ Engine

* The **starting point** of any SQLAlchemy application.
* Manages the **connection pool** and **communication** with the database.
* Created using the `create_engine()` function.

```python
from sqlalchemy import create_engine
engine = create_engine("sqlite:///example.db")
```

### 2Ô∏è‚É£ Connection

* Represents an **active link** to the database.
* Used to **execute raw SQL** or SQLAlchemy expressions directly.

```python
with engine.connect() as conn:
    result = conn.execute(text("SELECT 'Hello, SQLAlchemy!'"))
    print(result.scalar())
```

### 3Ô∏è‚É£ Session

* Acts as a **bridge between Python objects and the database** (used in ORM).
* Keeps track of changes to objects and handles commits or rollbacks.

```python
from sqlalchemy.orm import Session

with Session(engine) as session:
    session.add(new_user)
    session.commit()
```

---

### üß† In Summary

| Component      | Role                                           | Used In    |
| -------------- | ---------------------------------------------- | ---------- |
| **Engine**     | Establishes DB connection and manages the pool | Core & ORM |
| **Connection** | Executes SQL commands directly                 | Core       |
| **Session**    | Manages ORM objects and transactions           | ORM        |

---

### üß© Mini Exercise

1. Install SQLAlchemy using pip.
2. Create a small script to connect to an SQLite database and print a message.
3. Identify whether your script used **Core** or **ORM** features.

---
