# **Chapter 3 â€“ Basic Usage in Python**

Now that you understand the core concepts of ChromaDB, letâ€™s walk through **how to actually use ChromaDB in Python**. In this chapter, weâ€™ll cover:

* Connecting to Chroma (client setup)
* Creating a collection
* Adding documents with embeddings
* Querying by ID and metadata
* Querying by similarity search

---

## 3.1 Connecting to Chroma (Client Setup)

To start using ChromaDB in Python, you need to create a client instance.
There are two main modes:

* **In-memory (ephemeral)** â€“ Data is stored in RAM and disappears once the script ends.
* **Persistent** â€“ Data is stored on disk for later reuse.

```python
import chromadb

# In-memory client (temporary, data is lost after program ends)
client = chromadb.Client()

# Persistent client (stored in a folder on disk)
client = chromadb.PersistentClient(path="chroma_db")
```

Here, `path="chroma_db"` creates a directory where Chroma will store your collections and embeddings.

---

## 3.2 Creating a Collection

Collections are containers for related documents and embeddings.
Each collection has a name and can be created as follows:

```python
# Create (or get) a collection named "my_collection"
collection = client.create_collection(name="my_collection")

# You can also get an existing collection by name
collection = client.get_collection("my_collection")
```

---

## 3.3 Adding Documents with Embeddings

To make Chroma useful, you need to add documents.
Each document requires:

* `ids` â€“ Unique identifiers
* `documents` â€“ Text data (raw text)
* `metadatas` â€“ (Optional) Extra info like category, source, etc.
* `embeddings` â€“ Vector representation (if not provided, Chroma can generate using a built-in embedding function if configured)

Example:

```python
# Add some documents
collection.add(
    ids=["doc1", "doc2"],
    documents=[
        "ChromaDB is an open-source embedding database.",
        "Vector databases are useful for semantic search."
    ],
    metadatas=[
        {"category": "chroma"},
        {"category": "vector-db"}
    ]
)
```

ðŸ‘‰ If you have your own embeddings (e.g., from OpenAI or Sentence Transformers), you can pass them in using the `embeddings` argument.

---

## 3.4 Querying by ID and Metadata

You can retrieve documents directly by their IDs or filter using metadata.

```python
# Get documents by ID
result = collection.get(ids=["doc1"])
print(result)

# Get documents by metadata filter
result = collection.get(where={"category": "vector-db"})
print(result)
```

Output contains `ids`, `documents`, `metadatas`, and `embeddings` (if stored).

---

## 3.5 Querying by Similarity Search

The real power of Chroma comes from **similarity search**.
You provide a query text (or embedding), and Chroma finds the closest matching documents.

```python
# Query by text (Chroma will embed it if embedding function is configured)
query_result = collection.query(
    query_texts=["What is ChromaDB?"],
    n_results=2
)

print(query_result)
```

Example output:

```python
{
  'ids': [['doc1']],
  'distances': [[0.12]],
  'documents': [['ChromaDB is an open-source embedding database.']],
  'metadatas': [[{'category': 'chroma'}]]
}
```

You can also query using a **vector embedding** directly:

```python
query_result = collection.query(
    query_embeddings=[[0.1, 0.2, 0.3, ...]],  # Example vector
    n_results=2
)
```

---

âœ… At this point, you can:

* Connect to Chroma
* Create collections
* Add documents
* Retrieve them by ID/metadata
* Perform similarity searches

This forms the foundation for **Retrieval-Augmented Generation (RAG)** and other AI-powered applications.

---

