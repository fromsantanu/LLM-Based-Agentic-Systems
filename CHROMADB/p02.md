# **Chapter 2: Core Concepts**

In this chapter, we will explore the fundamental building blocks of **ChromaDB**, which will help you understand how information is stored, retrieved, and organized inside the database.

---

## 2.1 Vector Embeddings and Their Role in ChromaDB

At the heart of ChromaDB is the concept of **vector embeddings**.

* **What are embeddings?**
  Embeddings are numerical representations of text, images, or other data, usually expressed as high-dimensional vectors. For example, a sentence can be converted into a 768-dimensional vector using an embedding model.

* **Why embeddings matter?**
  Embeddings capture **semantic meaning**. For instance, the sentences

  * *"The dog is running in the park"*
  * *"A puppy is playing outside"*
    will produce vectors that are close to each other in the embedding space.

* **Role in ChromaDB:**
  ChromaDB uses embeddings to perform **similarity search**. Instead of searching by exact keywords, ChromaDB retrieves results by meaning. This makes it extremely powerful for:

  * Retrieval-Augmented Generation (RAG)
  * Semantic search
  * Recommendation systems

### Example: Creating embeddings with OpenAI

```python
from openai import OpenAI
import chromadb

# Example using OpenAI embeddings + ChromaDB
client = OpenAI()
chroma_client = chromadb.Client()

collection = chroma_client.create_collection("example")

texts = ["The dog is running", "A puppy is playing outside"]
embeddings = [client.embeddings.create(input=t, model="text-embedding-ada-002").data[0].embedding for t in texts]

collection.add(
    documents=texts,
    embeddings=embeddings,
    ids=["1", "2"]
)
```

---

## 2.2 Collections in ChromaDB

* **What is a Collection?**
  A **collection** in ChromaDB is like a "table" in a relational database. It groups related documents, embeddings, and metadata.

* **Why collections?**
  They help organize your data. For example:

  * `research_papers`
  * `customer_support_tickets`
  * `product_reviews`

* **Key features of collections:**

  * Each collection has a unique name.
  * You can add, update, or delete items in a collection.
  * Queries are always run inside a collection.

### Example: Creating and using a collection

```python
import chromadb

client = chromadb.Client()

# Create or get a collection
collection = client.create_collection(name="research_papers")

# Add documents
collection.add(
    documents=["ChromaDB is great for AI applications", "Vector databases enable semantic search"],
    ids=["doc1", "doc2"],
    metadatas=[{"topic": "AI"}, {"topic": "Databases"}]
)
```

---

## 2.3 Documents, IDs, and Metadata

Inside each collection, you store three main components:

1. **Documents**

   * The raw text (or content) you want to store.
   * Example: `"How to install ChromaDB"`

2. **IDs**

   * A unique string identifier for each document.
   * Ensures you can reference and update items later.
   * Example: `"doc123"`

3. **Metadata**

   * Extra information (key–value pairs) attached to a document.
   * Useful for filtering queries.
   * Example:

     ```json
     {
       "author": "Santanu",
       "category": "Tutorial"
     }
     ```

### Example: Adding documents with metadata

```python
collection.add(
    documents=["ChromaDB tutorial introduction", "Understanding embeddings in databases"],
    ids=["tut1", "tut2"],
    metadatas=[{"chapter": 1}, {"chapter": 2}]
)
```

### Example: Querying with metadata filter

```python
results = collection.query(
    query_texts=["What is ChromaDB?"],
    n_results=1,
    where={"chapter": 1}  # filter by metadata
)

print(results)
```

---

## 2.4 Local Persistent Storage vs In-Memory Storage

ChromaDB supports two types of storage:

1. **In-Memory Storage**

   * Default mode if no path is specified.
   * Data is stored in **RAM** and lost once the program stops.
   * Best for quick experiments and testing.

   ```python
   client = chromadb.Client()  # in-memory
   ```

2. **Persistent Local Storage**

   * Saves data on disk so it remains available after restarting.
   * Useful for production or long-term projects.
   * Requires specifying a directory path.

   ```python
   import chromadb

   client = chromadb.PersistentClient(path="my_chroma_storage")

   collection = client.create_collection("long_term_data")
   ```

   This creates a local database inside the folder `my_chroma_storage`.

---

✅ **Summary of Core Concepts:**

* **Embeddings** turn data into vectors for semantic search.
* **Collections** organize related documents.
* **Documents, IDs, and metadata** make your data retrievable and filterable.
* **In-memory vs persistent storage** determines whether data is temporary or permanent.

---



