# ğŸ“˜ Chapter 6: Creating Vector Tables in Supabase (SQL â€“ Very Simple)

Now we **actually build** what we designed in Chapter 5.

Donâ€™t worry if SQL feels scary.
Iâ€™ll explain it like **giving instructions to a clerk**.

---

## 1. Where Do We Write SQL in Supabase?

In **Supabase**, you write SQL in the:

ğŸ‘‰ **SQL Editor**

Think of it as:

> A place where you give written instructions to the database.

---

## 2. Step 1: Enable pgvector Extension

Before storing vectors, we must **switch on** vector support.

Imagine buying a mixer grinder:

* First, you plug it in
* Then you use it

Same idea here.

### SQL (run once)

```sql
create extension if not exists vector;
```

What this means (in plain words):

* â€œIf vector ability is not present, add itâ€
* Safe to run multiple times

âœ… After this, PostgreSQL understands vectors.

---

## 3. Step 2: Decide Embedding Size

Before creating the table, decide **one thing clearly**:

ğŸ‘‰ **Embedding dimension**

Examples:

* 384 â†’ small
* 768 â†’ common
* 1536 â†’ large

ğŸ“Œ Example assumption for this tutorial:
We choose **384**.

You must remember this number.

---

## 4. Step 3: Create the Vector Table

Now we create the table.

### SQL (simple and standard)

```sql
create table documents (
  id bigserial primary key,
  content text,
  embedding vector(384),
  metadata jsonb
);
```

---

## 5. Line-by-Line Explanation (Very Important)

Letâ€™s break it slowly.

### `create table documents`

* Create a table named `documents`
* Name can be anything

---

### `id bigserial primary key`

* Auto-increasing number
* Each row gets a unique ID
* Like a roll number

---

### `content text`

* Stores the actual text
* Paragraph, chunk, or sentence

---

### `embedding vector(384)`

* This is the **heart**
* Stores 384 numbers together
* Must match your embedding model size

âŒ If you try to insert 768 numbers here â†’ error

---

### `metadata jsonb`

* Stores extra information
* Flexible format
* Example:

```json
{"source":"pdf","topic":"medical"}
```

---

## 6. Why `jsonb` for Metadata?

Because metadata:

* Is flexible
* Changes over time
* Is different for different documents

Example uses:

* Filter only medical data
* Filter by year
* Filter by document name

ğŸ“Œ `jsonb` is fast and powerful.

---

## 7. Checking If Table Is Created

After running the SQL:

* Go to **Table Editor**
* You should see:

  * `documents` table
  * All 4 columns

If you see it â†’ success ğŸ‰

---

## 8. Common Errors Beginners Face

### âŒ Error: extension â€œvectorâ€ does not exist

ğŸ‘‰ You forgot Step 1
ğŸ‘‰ Run `create extension vector;`

---

### âŒ Error: dimension mismatch

ğŸ‘‰ Your embedding size â‰  table size
ğŸ‘‰ Table says 384, data says something else

---

### âŒ Error: permission denied

ğŸ‘‰ You are not using the SQL editor correctly
ğŸ‘‰ Ensure project is active

---

## 9. Can We Change Embedding Size Later?

Short answer: âŒ No.

If you want a different size:

* Create a **new table**
* Reinsert data

ğŸ“Œ Plan once, plan well.

---

## 10. Mental Picture to Remember

ğŸ§± Enable vector
ğŸ“ Fix dimension
ğŸ—„ Create table
ğŸ”¢ Store embeddings

---

## âœ… Chapter 6 Summary

* pgvector must be enabled first
* Embedding size must be fixed
* Vector tables are normal tables + vector column
* `vector(384)` stores embeddings
* `jsonb` metadata gives filtering power
* Small mistakes cause common errors

---

