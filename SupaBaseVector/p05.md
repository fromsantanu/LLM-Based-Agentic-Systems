# ğŸ“˜ Chapter 5: Designing Vector Tables in Supabase

This chapter is **very important**, because a **good table design** makes everything easy later
(search, speed, filtering, and fewer errors).

Think of this like **designing shelves before putting books**.

---

## 1. What Is a Vector Table?

A **vector table** is a normal database table that also stores:

* Text (what the document says)
* Embeddings (numbers that represent meaning)
* Metadata (extra information about the text)

It lives inside **Supabase**, using **PostgreSQL**.

---

## 2. The Minimum Columns You Need

A **basic and safe vector table** usually has these columns:

### âœ… 1. `id`

* Unique number or UUID
* Identifies each row clearly

ğŸ‘‰ Like a roll number in a class

---

### âœ… 2. `content`

* The actual text
* Example: paragraph, sentence, chunk of a document

ğŸ‘‰ This is **what you want to search**

---

### âœ… 3. `embedding`

* The vector (list of numbers)
* Fixed size (example: 384 or 768)

ğŸ‘‰ This is **how meaning is stored**

---

### âœ… 4. `metadata`

* Extra information (JSON format)
* Example:

  * document name
  * topic
  * source
  * date

ğŸ‘‰ This helps in **filtering results**

---

## 3. Simple Table Layout (Conceptual)

Think of the table like this (no SQL yet):

| id | content                      | embedding       | metadata               |
| -- | ---------------------------- | --------------- | ---------------------- |
| 1  | Heart disease treatment text | [0.21, 0.77, â€¦] | {"topic":"cardiology"} |
| 2  | Diabetes care notes          | [0.11, 0.64, â€¦] | {"topic":"endocrine"}  |

---

## 4. Why Metadata Is Very Important

Many beginners skip metadata â€” **donâ€™t**.

### Without metadata:

* You search everything
* Results may be mixed

### With metadata:

* You can filter

Example:

> â€œSearch only **medical** documentsâ€
> â€œSearch only **2024 research papers**â€

ğŸ“Œ Metadata = **control + accuracy**

---

## 5. What Is Document Chunking? (Very Simple)

Large documents are **not stored as one big text**.

Instead, they are split into **small pieces** called *chunks*.

Example:

* One PDF â†’ 50 chunks
* Each chunk â†’ one row in the table

Why?

* Better accuracy
* Better search
* Faster results

ğŸ‘‰ Like cutting a long book into paragraphs.

---

## 6. Chunk Size (Simple Rule)

Good beginner rule:

* 200â€“500 words per chunk

Too small:

* Loses meaning

Too large:

* Confuses the embedding

ğŸ“Œ Keep it **medium-sized**.

---

## 7. One Table or Multiple Tables?

### Option 1: One Vector Table (Recommended for Beginners)

* All documents in one table
* Use metadata to separate types

Example:

```json
{"type":"medical"}
{"type":"education"}
```

### Option 2: Multiple Tables

* Separate tables for separate domains
* Used only in large systems

ğŸ“Œ Start with **one table**.

---

## 8. Fixed Embedding Size (Very Important Rule)

Once you choose an embedding model:

* Embedding size is fixed
* Every row must match that size

âŒ You cannot mix:

* 384-size vectors
* 768-size vectors

ğŸ‘‰ If model changes â†’ create a **new table**

---

## 9. Common Beginner Mistakes

âŒ Forgetting metadata
âŒ Changing embedding size mid-way
âŒ Storing full PDFs as one row
âŒ Not planning for filtering
âŒ Mixing different content types blindly

Avoid these and life becomes easy ğŸ™‚

---

## 10. Mental Picture to Remember

ğŸ“„ Document
âœ‚ï¸ Chunks
ğŸ”¢ Embeddings
ğŸ—„ Vector Table
ğŸ” Smart Search

---

## âœ… Chapter 5 Summary

* A vector table is a normal table + embeddings
* Minimum columns: id, content, embedding, metadata
* Metadata helps filtering and control
* Documents should be chunked
* Embedding size must stay fixed
* Good design = fewer problems later

---

